<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>My Potree Viewer</title>
    <link rel="stylesheet" type="text/css" href="../build/potree/potree.css">
    <link rel="stylesheet" type="text/css" href="../libs/jquery-ui/jquery-ui.min.css">
    <link rel="stylesheet" type="text/css" href="../libs/openlayers/ol.css">
    <link rel="stylesheet" type="text/css" href="../libs/spectrum/spectrum.css">
    <link rel="stylesheet" type="text/css" href="../libs/jstree/themes/mixed/style.css">

    <!-- 必要依赖 -->
    <script src="../libs/jquery/jquery-3.1.1.min.js"></script>
    <script src="../libs/spectrum/spectrum.js"></script>
    <script src="../libs/jquery-ui/jquery-ui.min.js"></script>
    <script src="../libs/other/BinaryHeap.js"></script>
    <script src="../libs/tween/tween.min.js"></script>
    <script src="../libs/d3/d3.js"></script>
    <script src="../libs/proj4/proj4.js"></script>
    <script src="../libs/openlayers/ol.js"></script>
    <script src="../libs/i18next/i18next.js"></script>
    <script src="../libs/jstree/jstree.js"></script>

    <!-- Potree -->
    <script src="../build/potree/potree.js"></script>
</head>
<body>
    <div class="potree_container" style="position: absolute; width: 100%; height: 100%; left: 0px; top: 0px; ">
        <div id="potree_render_area" style="background-image: url('../build/potree/resources/images/background.jpg');">
        </div>
        <div id="potree_sidebar_container"> </div>
    </div>

    <script>
        let viewer = new Potree.Viewer(document.getElementById("potree_render_area"));
        viewer.setEDLEnabled(true);
        viewer.setFOV(60);
        viewer.setPointBudget(1_000_000);

        // 加载 GUI 并显示侧边栏
        viewer.loadGUI(() => {
            viewer.setLanguage('en');
            viewer.toggleSidebar();
        });

        Potree.loadPointCloud("../pointclouds/out_mycloud/metadata.json", "mycloud", e => {
            let pointcloud = e.pointcloud;
            viewer.scene.addPointCloud(pointcloud);
            viewer.fitToScreen();
        });
    </script>
</body>
</html>
